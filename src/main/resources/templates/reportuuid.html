<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <title>VIEWUUID</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.16/vue.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


</head>
<body>
        <div class="container" id="app">
            

            <div>
                   
                    <table class="table">
                        <thead>
                            <td> 場次:{{contestid}} Location</td>
                            <td>尚有可用電腦</td>
                            <td>參賽隊-人數-距離</td>
                            <td>
                                    <a :href="updateUrl" class="btn btn-primary active" role="button" aria-pressed="true">選定場地</a>

                            </td>
                        </thead>
                        <tbody>
                        <tr v-for="item in items">
                        <td>
                            {{item.location.name}}
                        </td>
                        <td>
                            {{item.location.capacity}}
                        </td>
                        <td>
                            <ul class="list-group">
                                <li v-for="team in item.teams">
                                    {{team.name}}({{team.members}}) - {{parseInt(team.distance)}}
                                </li>
                            </ul>
                        </td>
                        
                           
                        </tr>
                        </tbody>
                    </table>
        
        </div>

 <footer>
        <script th:inline="javascript">
        /*<![CDATA[*/
        Vue.prototype.$http = axios;
        let config = {
            headers: {
                'content-type': 'application/json;CHARSET=UTF-8'
            }
        };

        var app = new Vue({
            el: '#app',
            data: {
                uuid: /*[[${uuid}]]*/ 'default',
                contestid: "",
                items: {},
                updateUrl: ""
            },
            created: function() {
                let vm = this;
                let url =  "/api/report/uuid/" + this.uuid;

                this.$http.get(url, config).then((response) => {
                    vm.items = JSON.parse(response.data.report);
                    vm.contestid = response.data.contestid;
                vm.updateUrl = "/report/" + vm.contestid + "/lock/" + vm.uuid;

                   console.log(vm.contestid);
                   console.log(vm.items.length);
                    // console.log(response.data.report);

                }, (response) => {
                    // error callback
                });


            }
        })

         /*]]>*/
        </script>
</footer>


</body>
</html>